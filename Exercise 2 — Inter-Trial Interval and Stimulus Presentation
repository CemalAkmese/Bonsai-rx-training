Exercise 2 â€” Inter-Trial Interval and Stimulus Presentation

ğŸ¯ Goal
This exercise implements the first part of the state machine: Inter-Trial Interval (ITI) â€” a waiting period before the trial starts. Stimulus Presentation â€” turning a stimulus LED on and then off for a fixed duration.
It sets up the timing and control logic for each trial.

ğŸ§© Step-by-Step Workflow Logic
1. Timer â†’ StimOn A Timer node is inserted with a DueTime of ~3 seconds. This represents the ITI, i.e., the system waits 3 seconds before starting the trial. When the timer fires, it triggers a Sink node named StimOn.

2. Sink â†’ LED ON
Inside StimOn: A Boolean operator is set to True. It is connected to the Led subject (using Multicast).
This turns the LED on, representing stimulus onset.

3. Delay â†’ StimOff
After stimulus onset, a Delay node is inserted (e.g., 2 seconds).
This defines how long the stimulus remains ON.
After the delay, a second Sink node (StimOff) is triggered.

4. Sink â†’ LED OFF
Inside StimOff: A Boolean operator is set to False.
Connected to the same Led subject. This turns the LED off, ending the stimulus.
5. Repeat

A Repeat node is added after StimOff. This sends the workflow back to the beginning (the ITI timer), allowing multiple trials to run sequentially.

ğŸ” What this workflow does, in plain words

Waits for the ITI timer (~3 s) â†’ starts trial
Turns LED ON (StimOn) â†’ stimulus is presented
Waits for a short period (Delay) â†’ stimulus duration
Turns LED OFF (StimOff) â†’ stimulus ends
Repeats the sequence for the next trial

ğŸ“ ASCII Flow Diagram
ITI Timer (3s)
       â”‚
       â–¼
   [StimOn]  (LED = ON)
       â”‚
       â–¼
     Delay   (stimulus duration)
       â”‚
       â–¼
   [StimOff] (LED = OFF)
       â”‚
       â–¼
     Repeat â†’ back to ITI Timer

âš¡ Key Notes
The Sink operator allows you to perform side-effects (like turning on an LED) without changing the main event stream. The Multicast connection ensures the Led subject can be used elsewhere in the workflow. The Repeat operator automates multiple trials without manually restarting the workflow.
Slight delays may occur at workflow start due to opening the Arduino connection (Firmata protocol).

âœ… Summary:
Exercise 2 establishes a trial structure where each trial consists of: Waiting a fixed time (ITI) Presenting a stimulus (LED ON). Keeping it on for a defined duration. Turning it off. Automatically starting the next trial
Itâ€™s the foundation for building the full state machine with response detection and reward logic in later exercises.
